# Упражнение 8 - Дефиниране на схема на релация

### Типове данни

- `BIT` - 0, 1 или NULL

- `DECIMAL(precision, scale)` - разглеждано е в предно упражнение
  прецизността е колко цифри общо има числото, а scale е колко от тях да са след десетичната запетая

- `FLOAT` - FLOAT[N], където N e битове за мантисата
- `REAL` - FLOAT С N=24
- `CHAR` - с фиксирана дължина;
  `CHAR(5)` - ще се запишат 5,
  - ако се подадат по-малко ще се запълнят с интервали накрая (които се игнорират при сравнение)
  - ако се подадат повече няма да се отреже символния низ до 5, а ще даде грешка
- `VARCHAR` - с променлива дължина; default дължината е 1; даваме му максимална дължина, която може да приема
- `DATE` - за дата
- `TIME` - за време
- `DATETIME` - за дата и време

### Създаване на база данни

```sql
CREATE DATABASE <database name>
```

### Използване на база данни

```sql
USE DATABASE <database name>
```

### Създаване на таблица

```sql
CREATE TABLE <table name> (column1 name data type, column2 name data type, ...)
```

```sql
SELECT COLUMN1, COLUMN2,..
INTO <new table name>
FROM
WHERE
```

При създаване на таблица освен че можем да зададем тип на данните можем да окажем дали този атрибут може да приема null стойности (чрез NOT NULL, a NULL е default-но?) или дали да приема default стойност и каква е тя, ако не е оказана стойност (чрез DEFAULT <стойност>) 

Ако се използва втория начин за създаване на таблица, то типа данни и null ограниченията се прехвърлят в новата таблица. В SELECT клаузата задаваме име на таблицата чрез AS накрая.

`id INT IDENTITY(from which num, +how many)` - чрез identity можем да увеличаваме стойността всеки път при създаване на нов кортеж; първото число в скобите отговаря за първата стойност, а второто отговаря за това с колко да се увеличава всяко число

### Мoдификации на таблицата

```sql
ALTER TABLE
ADD name type, ...
--или
АLTER COLUMN name type
--или
DROP COLUMN name, ...
```

#### *Примери*

```sql
ALTER TABLE MOVIESTAR
ADD PHONE VARCHAR(16);
```
Трябва в таблицата да се зададе стойност. Ако кажем NOT NULL, няма да се изпълни модификацията (тъй като ще търси за всеки съществуващ кортеж да даде default стойност, която ще е null). Трябва да зададем NOT NULL DEFAULT в такъв случай.

NULL DEFAULT - означава че ще се зададат null стойности

NULL DEFAULT ... WITH VALUES - ще зададе стойностите да са default

```sql
ALTER TABLE
ADD DEFAULT ...
FOR <име на колона>;
```
DEFAULT може да се сложи в началото, и в края - като в края синтаксисът е такъв какъвто е горе

### Изтриване на база данни и таблици

```sql
DROP DATABASE <name>
```

```sql
DROP TABLE <name>, ...
```
